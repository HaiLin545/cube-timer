<!-- index.wxml -->
<view class="home {{timerState==='Off' && 'off-state'}}">
    <header bind:onSetting="openSideBlock" wx:if="{{timerState==='Off'}}"></header>
    <main class="main">
        <swiper class="swiper" bind:change="handleTabChange" current="{{currentTabIndex}}" duration="300">
            <swiper-item class="swiper-item">
                <timer-block
                    bind:onAddRecord="onAddRecord"
                    timerState="{{timerState}}"
                    enableInspection="{{enableInspection}}"
                    bind:changeTimerState="onChangeTimerState"
                    bind:updateCurrentRecord="handleUpdateRecord"
                ></timer-block>
            </swiper-item>
            <swiper-item class="swiper-item" wx:if="{{timerState==='Off'}}">
                <record-block records="{{records}}" bind:showRecordPopper="handelShowRecordPopper"></record-block>
            </swiper-item>
            <swiper-item class="swiper-item" wx:if="{{timerState==='Off'}}">
                <statistic-block></statistic-block>
            </swiper-item>
        </swiper>
    </main>
    <record-popper
        wx:if="{{isShowRecordPopper}}"
        record="{{popperRecord}}"
        bind:closePopper="handleCloseRecordPopper"
        bind:updateRecordItem="handleUpdateRecordItem"
    >
    </record-popper>
    <confirm-popper
        bind:closePopper="handleHideConfirmPopper"
        wx:if="{{isShowConfirmPopper}}"
        onConfirm="{{confirmCallback}}"
        title="{{confirmPopperTitle}}"
        okText="{{confirmPopperOkText}}"
    ></confirm-popper>
    <tabbar wx:if="{{timerState==='Off'}}" tabindex="{{currentTabIndex}}" bind:onClickTab="handleClickTab"></tabbar>
</view>
